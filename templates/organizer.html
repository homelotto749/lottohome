<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ü–∞–Ω–µ–ª—å –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .container { max-width: 800px; margin: auto; }
        .card { border: 1px solid #ccc; padding: 20px; margin-bottom: 20px; border-radius: 8px; background: #f9f9f9; }
        input, button { padding: 10px; margin: 5px 0; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üë®‚Äçüíº –ü–∞–Ω–µ–ª—å –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞</h1>
        <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ email }} (<a href="/logout">–í—ã–π—Ç–∏</a>)</p>

        <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö/—É—Å–ø–µ—Ö–µ -->
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <p class="{{ category }}">{{ message }}</p>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç–∏—Ä–∞–∂–∞ -->
        <div class="card">
            <h3>üÜï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–∏—Ä–∞–∂</h3>
            <form action="/create_draw" method="post">
                <label>–ù–æ–º–µ—Ä —Ç–∏—Ä–∞–∂–∞ (ID):</label><br>
                <input type="text" name="draw_id" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 101"><br>
                
                <label>–î–∞—Ç–∞ —Ä–æ–∑—ã–≥—Ä—ã—à–∞:</label><br>
                <input type="date" name="draw_date" required><br>
                
                <label>–î–∂–µ–∫–ø–æ—Ç (—Ä—É–±):</label><br>
                <input type="number" name="jackpot" value="10000"><br>
                
                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–ª–µ—Ç–æ–≤:</label><br>
                <input type="number" name="ticket_count" value="50" max="500" required><br>
                
                <button type="submit">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –±–∏–ª–µ—Ç–æ–≤</button>
            </form>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∏—Ä–∞–∂–µ–π -->
        <h3>üìú –ò—Å—Ç–æ—Ä–∏—è —Ç–∏—Ä–∞–∂–µ–π</h3>
        <table>
            <thead>
                <tr>
                    <th>–¢–∏—Ä–∞–∂</th>
                    <th>–î–∞—Ç–∞</th>
                    <th>–ë–∏–ª–µ—Ç–æ–≤</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–í—ã–∏–≥—Ä—ã—à–Ω—ã–µ —á–∏—Å–ª–∞</th>
                </tr>
            </thead>
            <tbody>
                {% for draw in draws %}
                <tr>
                    <td>#{{ draw.id }}</td>
                    <td>{{ draw.date }}</td>
                    <td>{{ draw.total_tickets }}</td>
<td>
    {% if draw.status == 'open' %}
        <span style="color: green; font-weight: bold;">üü¢ –ò–¥–µ—Ç –ø—Ä–æ–¥–∞–∂–∞</span><br>
        <a href="/play_draw/{{ draw.id }}" style="background: red; color: white; padding: 5px; text-decoration: none; font-size: 12px; border-radius: 3px;">üé± –ü–†–û–í–ï–°–¢–ò –†–û–ó–´–ì–†–´–®</a>
    {% elif draw.status == 'closed' %}
        <span style="color: red;">üî¥ –ó–∞–≤–µ—Ä—à–µ–Ω</span>
        <a href="/draw_details/{{ draw.id }}">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
    {% endif %}
</td>
                    <td>{{ draw.winning_numbers if draw.winning_numbers else '-' }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html>